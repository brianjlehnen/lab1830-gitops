# Network Security Configuration
# Global network settings
global:
  nfsServer: "192.168.x.159"
  lokiEndpoint: "192.168.x.250"
  lokiPort: 31000
  clusterCIDR: "192.168.x.0/22"
# Network policies per namespace
networkPolicies:
  monitoring:
    namespace: monitoring-production
    enabled: true
    policies:
      - name: monitoring-security-policy
        podSelector: {}
        ingress:
          - from:
            - namespaceSelector:
                matchLabels:
                  name: ingress-nginx
            ports:
              - protocol: TCP
                port: 3000
        egress:
          - to: []
            ports:
              - protocol: UDP
                port: 53
              - protocol: TCP
                port: 53
          - to:
            - ipBlock:
                cidr: "192.168.x.159/32"
            ports:
              - protocol: TCP
                port: 2049
          - to:
            - podSelector:
                matchLabels:
                  app.kubernetes.io/name: prometheus
            ports:
              - protocol: TCP
                port: 9090
          - to: []
            ports:
              - protocol: TCP
                port: 31000
          - to: []
            ports:
              - protocol: TCP
                port: 443
              - protocol: TCP
                port: 6443
          - to: []
            ports:
              - protocol: TCP
                port: 587
              - protocol: TCP
                port: 465
          - to: []
            ports:
              - protocol: TCP
                port: 9100  # node-exporter
              - protocol: TCP
                port: 8080  # kube-state-metrics, alertmanager config-reloader
              - protocol: TCP
                port: 9153  # coredns
              - protocol: TCP
                port: 10250 # kubelet
              - protocol: TCP
                port: 8085  # velero
              - protocol: TCP
                port: 9093  # alertmanager
  applications:
    namespace: applications
    enabled: true
    policies:
      - name: default-deny-all
        podSelector: {}
        policyTypes:
          - Ingress
          - Egress
