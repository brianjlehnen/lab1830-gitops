# charts/applications/velero/values.yaml
velero:
  # Add the AWS plugin back - it's required for S3-compatible storage
  initContainers:
    - name: velero-plugin-for-aws
      image: velero/velero-plugin-for-aws:v1.9.0
      imagePullPolicy: IfNotPresent
      volumeMounts:
        - mountPath: /target
          name: plugins
      
  configuration:
    backupStorageLocation:
      - name: default
        provider: aws
        bucket: velero-backups
        config:
          region: homelab
          s3ForcePathStyle: "true"
          # We'll add s3Url later when we configure real storage
    
    volumeSnapshotLocation: []
    
  snapshotsEnabled: false
  
  nodeAgent:
    enabled: true
    
  deployNodeAgent: true
  
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi

  credentials:
    secretContents:
      cloud: |
        [default]
        aws_access_key_id = dummy
        aws_secret_access_key = dummy