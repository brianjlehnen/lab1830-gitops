# charts/applications/velero/values.yaml
velero:
  # Use official Velero chart values
  initContainers:
    - name: velero-plugin-for-aws
      image: velero/velero-plugin-for-aws:v1.9.0
      
  configuration:
    backupStorageLocation:
      - name: default
        provider: aws
        bucket: velero-backups
        accessMode: ReadWrite
        config:
          region: homelab
          s3ForcePathStyle: "true"
          s3Url: http://minio.default.svc.cluster.local:9000
        credential:
          name: cloud-credentials
          key: cloud
          
  # Enable node agent for File System Backup (NFS support)
  nodeAgent:
    enabled: true
    
  # Resources following your patterns
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi

  # Create credentials secret
  credentials:
    secretContents:
      cloud: |
        [default]
        aws_access_key_id = minioadmin
        aws_secret_access_key = minioadmin

# Schedule configurations
schedules:
  daily-backup:
    disabled: false
    schedule: "0 1 * * *"
    template:
      includedNamespaces: ["*"]
      storageLocation: default
      ttl: "720h0m0s"  # 30 days