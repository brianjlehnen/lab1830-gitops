# charts/applications/velero/values.yaml - Remove failing init container
velero:
  # Remove the problematic init container entirely
  # initContainers: []  # or just remove the whole section
      
  configuration:
    # Simple backup storage location without S3 plugins
    backupStorageLocation:
      - name: default
        provider: aws  # Keep this for now but without init container
        bucket: velero-backups
        config:
          region: homelab
          s3ForcePathStyle: "true"
    
    # Disable volume snapshots
    volumeSnapshotLocation: []
    
  # Disable volume snapshots entirely
  snapshotsEnabled: false
  
  # Enable node agent for File System Backup (this is the important part)
  nodeAgent:
    enabled: true
    
  deployNodeAgent: true
  
  # Resources
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi

  # Simple credentials
  credentials:
    secretContents:
      cloud: |
        [default]
        aws_access_key_id = dummy
        aws_secret_access_key = dummy