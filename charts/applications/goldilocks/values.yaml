# charts/applications/goldilocks/values.yaml
goldilocks:
  # Enable the dashboard UI
  dashboard:
    enabled: true
    ingress:
      enabled: true
      className: nginx
      annotations:
        cert-manager.io/cluster-issuer: letsencrypt-staging
        nginx.ingress.kubernetes.io/ssl-redirect: "true"
      hosts:
        - host: goldilocks.lab1830.com
          paths:
            - path: /
              type: Prefix  # Changed from pathType to type
      tls:
        - secretName: goldilocks-tls
          hosts:
            - goldilocks.lab1830.com
    resources:
      requests:
        cpu: 25m
        memory: 32Mi
      limits:
        cpu: 100m
        memory: 64Mi
  # Controller manages VPA objects
  controller:
    enabled: true
    resources:
      requests:
        cpu: 25m
        memory: 32Mi
      limits:
        cpu: 100m
        memory: 64Mi
  # VPA (Vertical Pod Autoscaler) - required for recommendations
  vpa:
    enabled: true
    # Create VPA CRDs
    updater:
      enabled: false # We only want recommendations, not automatic updates
    recommender:
      enabled: true
      resources:
        requests:
          cpu: 50m
          memory: 100Mi
        limits:
          cpu: 200m
          memory: 200Mi
    admissionController:
      enabled: false # Disable automatic pod mutations
  # Install metrics-server if not present (you already have it)
  metrics-server:
    enabled: false