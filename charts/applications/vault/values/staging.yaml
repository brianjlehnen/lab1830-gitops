# Staging Vault - Development mode with CVE-2025-6000 fix
vault:
  global:
    enabled: true
    tlsDisable: true
  
  injector:
    enabled: true
    replicas: 1
    image:
      repository: hashicorp/vault-k8s
      tag: "1.4.0"  # Stable vault-k8s version (different from Vault server)
    resources:
      requests:
        memory: "64Mi"
        cpu: "25m"
      limits:
        memory: "128Mi"
        cpu: "50m"
  
  server:
    image:
      repository: hashicorp/vault
      tag: "1.20.1"  # CRITICAL: CVE-2025-6000 patched version
    
    dev:
      enabled: true
      devRootToken: "staging-root-token-12345"
      devListenAddress: "0.0.0.0:8200"
    
    ha:
      enabled: false
    
    standalone:
      enabled: false
    
    resources:
      requests:
        memory: "256Mi"
        cpu: "100m"
      limits:
        memory: "512Mi"
        cpu: "200m"
    
    extraEnvironmentVars:
      VAULT_DISABLE_MLOCK: true
    
    dataStorage:
      enabled: false
    
    service:
      enabled: true
      type: ClusterIP
      port: 8200
      targetPort: 8200
    
    ingress:
      enabled: true
      ingressClassName: nginx
      annotations:
        nginx.ingress.kubernetes.io/ssl-redirect: "false"
      hosts:
        - host: vault-staging.lab1830.com
          paths:
            - "/"
      tls: []
  
  ui:
    enabled: true
    serviceType: "ClusterIP"
    externalPort: 8200
